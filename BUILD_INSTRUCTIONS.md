# CuraEngine Windowsæ„å»ºè¯´æ˜

## ğŸ‰ æ„å»ºçŠ¶æ€ï¼šæˆåŠŸï¼

CuraEngineå·²æˆåŠŸæ„å»ºå¹¶å¯ä»¥ä½¿ç”¨ï¼

## âš¡ å¿«é€Ÿå¼€å§‹ï¼ˆä¸€æ¡å‘½ä»¤ï¼‰

```cmd
build_curaengine.bat
```

**å°±è¿™ä¹ˆç®€å•ï¼** è¿™ä¸€æ¡å‘½ä»¤å°†ï¼š
- âœ… æ„å»ºCuraEngine.exe
- âœ… éƒ¨ç½²åˆ°Curaç›®å½•
- âœ… æ¨é€åˆ°GitHubä»“åº“

**æ€»è€—æ—¶**ï¼šçº¦5-10åˆ†é’Ÿ

## ğŸ“ ç”Ÿæˆçš„æ–‡ä»¶

- **CuraEngine.exe**: `build\Release\CuraEngine.exe`
- **é™æ€åº“**: `build\Release\_CuraEngine.lib`
- **ä¾èµ–é¡¹**: æ‰€æœ‰DLLæ–‡ä»¶ä½äº `build\Release\`
- **éƒ¨ç½²åˆ°Cura**: `C:\Users\wsd07\vscode\Cura-Dev\Cura\CuraEngine.exe`

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®æ„å»ºå’Œéƒ¨ç½²
```cmd
build_curaengine.bat
```

è¿™ä¸ªè„šæœ¬å°†æ‰§è¡Œï¼š
1. âœ… æ¸…ç†ä¹‹å‰çš„æ„å»º
2. âœ… å®‰è£…Conanä¾èµ–é¡¹ï¼ˆæ­£ç¡®çš„Boosté…ç½®ï¼‰
3. âœ… é…ç½®CMakeï¼ˆä½¿ç”¨Visual Studioç¯å¢ƒï¼‰
4. âœ… æ„å»ºCuraEngine.exe
5. âœ… æµ‹è¯•å¯æ‰§è¡Œæ–‡ä»¶
6. âœ… å¤åˆ¶åˆ°Curaç›®å½• (`C:\Users\wsd07\vscode\Cura-Dev\Cura`)
7. âœ… æ¨é€åˆ°GitHubä»“åº“ (https://github.com/wsd07/Cura)

### å¤šç§æ„å»ºé€‰é¡¹
```cmd
# å®Œæ•´æ„å»ºï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
build_curaengine.bat

# å¿«é€Ÿæ„å»ºï¼ˆä»£ç ä¿®æ”¹åæ¨èï¼‰
build_curaengine.bat --quick

# ä»…æ¸…ç†æ„å»ºç›®å½•
build_curaengine.bat --clean

# æ„å»ºä½†ä¸éƒ¨ç½²
build_curaengine.bat --no-deploy

# æ„å»ºä½†ä¸æäº¤Git
build_curaengine.bat --no-git

# æ˜¾ç¤ºæ‰€æœ‰é€‰é¡¹
build_curaengine.bat --help
```

### æµ‹è¯•æ„å»ºç»“æœ
```cmd
build\Release\CuraEngine.exe --help
```

### è¿è¡Œåˆ‡ç‰‡æ“ä½œ
```cmd
build\Release\CuraEngine.exe slice -j settings.def.json -l model.stl -o output.gcode
```

## ğŸ› ï¸ æ„å»ºè„šæœ¬åŠŸèƒ½

### å®Œæ•´è‡ªåŠ¨åŒ–
`build_curaengine.bat` è„šæœ¬æä¾›ï¼š
- **ä¾èµ–é¡¹ç®¡ç†**: é€šè¿‡Conanè‡ªåŠ¨å®‰è£…æ‰€æœ‰å¿…éœ€çš„ä¾èµ–é¡¹
- **ç¯å¢ƒè®¾ç½®**: é…ç½®Visual Studio 2022æ„å»ºç¯å¢ƒ
- **é”™è¯¯å¤„ç†**: é‡åˆ°ä»»ä½•é”™è¯¯æ—¶åœæ­¢å¹¶æ˜¾ç¤ºæ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯
- **éªŒè¯**: åœ¨éƒ¨ç½²å‰æµ‹è¯•æ„å»ºçš„å¯æ‰§è¡Œæ–‡ä»¶
- **éƒ¨ç½²**: å¤åˆ¶åˆ°Curaç›®å½•å¹¶æ›´æ–°GitHubä»“åº“
- **è¿›åº¦æŠ¥å‘Š**: æ¸…æ™°çš„é€æ­¥è¿›åº¦æŒ‡ç¤º
- **çµæ´»é€‰é¡¹**: æ”¯æŒå¿«é€Ÿæ„å»ºã€è·³è¿‡éƒ¨ç½²ç­‰å¤šç§æ¨¡å¼

## ğŸ”§ æ‰‹åŠ¨æ„å»ºå‘½ä»¤

å¦‚æœæ‚¨æ›´å–œæ¬¢æ‰‹åŠ¨æ„å»ºï¼ˆä¸æ¨èï¼‰ï¼š

```cmd
# 1. æ¸…ç†ä¹‹å‰çš„æ„å»º
rmdir /s /q build

# 2. å®‰è£…ä¾èµ–é¡¹
conan install . --build=missing -o "boost/*:header_only=False" -o "boost/*:without_exception=False"

# 3. è®¾ç½®Visual Studioç¯å¢ƒ
call "C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat"

# 4. é…ç½®CMake
cmake --preset conan-release

# 5. æ„å»º
cmake --build build\Release --config Release

# 6. å¤åˆ¶åˆ°Curaç›®å½•
copy build\Release\CuraEngine.exe C:\Users\wsd07\vscode\Cura-Dev\Cura\CuraEngine.exe /Y

# 7. æ¨é€åˆ°GitHub
cd C:\Users\wsd07\vscode\Cura-Dev\Cura
git add CuraEngine.exe
git commit -m "æ›´æ–°CuraEngine.exe"
git push origin main
```

## ğŸ”„ è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹

æ„å»ºè„šæœ¬å®ç°äº†å®Œæ•´çš„CI/CDå¼å·¥ä½œæµç¨‹ï¼š

1. **æ¸…ç†æ„å»ºç¯å¢ƒ**: åˆ é™¤ä¹‹å‰çš„æ„å»ºäº§ç‰©
2. **ä¾èµ–é¡¹è§£æ**: ä½¿ç”¨Conanç®¡ç†æ‰€æœ‰C++ä¾èµ–é¡¹
3. **ç¯å¢ƒé…ç½®**: è®¾ç½®MSVCç¼–è¯‘å™¨ç¯å¢ƒ
4. **æ„å»ºè¿‡ç¨‹**: ä½¿ç”¨ä¼˜åŒ–çš„Releaseé…ç½®ç¼–è¯‘
5. **è´¨é‡ä¿è¯**: æµ‹è¯•å¯æ‰§è¡Œæ–‡ä»¶åŠŸèƒ½
6. **éƒ¨ç½²**: å¤åˆ¶åˆ°ç›®æ ‡Curaå®‰è£…ç›®å½•
7. **ç‰ˆæœ¬æ§åˆ¶**: æäº¤å¹¶æ¨é€åˆ°GitHubä»“åº“

## ğŸ“Š æ„å»ºè¿‡ç¨‹è¯¦æƒ…

### é€æ­¥åˆ†è§£

| æ­¥éª¤ | æè¿° | è€—æ—¶ | å…³é”®æ€§ |
|------|------|------|--------|
| 1 | æ¸…ç†æ„å»ºç›®å½• | ~1ç§’ | âœ… |
| 2 | å®‰è£…Conanä¾èµ–é¡¹ | ~2-5åˆ†é’Ÿ | âœ… |
| 3 | é…ç½®CMake | ~10ç§’ | âœ… |
| 4 | ç¼–è¯‘CuraEngine | ~2-3åˆ†é’Ÿ | âœ… |
| 5 | éªŒè¯å¯æ‰§è¡Œæ–‡ä»¶ | ~1ç§’ | âœ… |
| 6 | éƒ¨ç½²åˆ°Cura | ~1ç§’ | âœ… |
| 7 | æ¨é€åˆ°GitHub | ~5-10ç§’ | âš ï¸ |

**æ€»è€—æ—¶**: å®Œæ•´æ„å»ºå’Œéƒ¨ç½²çº¦5-10åˆ†é’Ÿ

### å¿«é€Ÿæ„å»ºæ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | ä¾èµ–é¡¹å®‰è£… | CMakeé…ç½® | ç¼–è¯‘ | æ€»è€—æ—¶ |
|------|------------|-----------|------|--------|
| å®Œæ•´æ„å»º | âœ… | âœ… | âœ… | ~5-10åˆ†é’Ÿ |
| å¿«é€Ÿæ„å»º | âŒ | æ™ºèƒ½è·³è¿‡ | âœ… | ~1-2åˆ†é’Ÿ |

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### âŒ Boosté“¾æ¥é”™è¯¯ (æ‰¾ä¸åˆ° `boost::throw_exception`)
**ç—‡çŠ¶**: å…³äºç¼ºå°‘ `boost::throw_exception` å‡½æ•°çš„é“¾æ¥é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: âœ… **æ„å»ºè„šæœ¬è‡ªåŠ¨ä¿®å¤**:
- è®¾ç½® `boost/*:header_only=False` ä»¥åŒ…å«ç¼–è¯‘çš„Booståº“
- è®¾ç½® `boost/*:without_exception=False` ä»¥å¯ç”¨å¼‚å¸¸å¤„ç†
- åŒ…å«è‡ªå®šä¹‰çš„ `src/boost_exception_fix.cpp` å®ç°

#### âŒ æ‰¾ä¸åˆ°Visual Studioç¯å¢ƒ
**ç—‡çŠ¶**: "æ‰¾ä¸åˆ°Visual Studioç¯å¢ƒ" é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:
1. âœ… å®‰è£…Visual Studio 2022 Communityç‰ˆæœ¬
2. âœ… ç¡®ä¿å®‰è£…åœ¨é»˜è®¤ä½ç½®
3. âœ… ä»æ™®é€šå‘½ä»¤æç¤ºç¬¦è¿è¡Œè„šæœ¬ï¼ˆä¸æ˜¯VSå¼€å‘è€…å‘½ä»¤æç¤ºç¬¦ï¼‰

#### âŒ CMakeé…ç½®å¤±è´¥
**ç—‡çŠ¶**: æ‰¾ä¸åˆ°CMakeé¢„è®¾æˆ–é…ç½®é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**:
1. âœ… å®Œå…¨åˆ é™¤ `build` ç›®å½•
2. âœ… é‡æ–°è¿è¡Œ `build_curaengine.bat`
3. âœ… æ£€æŸ¥Conanä¾èµ–é¡¹æ˜¯å¦æˆåŠŸå®‰è£…

#### âŒ Gitæ¨é€å¤±è´¥
**ç—‡çŠ¶**: "Gitæ¨é€å¤±è´¥" è­¦å‘Šæ¶ˆæ¯
**è§£å†³æ–¹æ¡ˆ**:
1. âœ… æ£€æŸ¥GitHubå‡­æ®: `git config --global user.name` å’Œ `git config --global user.email`
2. âœ… éªŒè¯ç½‘ç»œè¿æ¥
3. âœ… æ‰‹åŠ¨æ¨é€: `cd C:\Users\wsd07\vscode\Cura-Dev\Cura && git push origin main`
4. âœ… æ£€æŸ¥ä»“åº“æ˜¯å¦å­˜åœ¨ä¸”æ‚¨æœ‰å†™å…¥æƒé™

#### âŒ æ‰¾ä¸åˆ°Curaç›®å½•
**ç—‡çŠ¶**: "æ‰¾ä¸åˆ°Curaç›®å½•" é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: âœ… ç¡®ä¿Curaå…‹éš†åœ¨ `C:\Users\wsd07\vscode\Cura-Dev\Cura`

#### âŒ Conanå®‰è£…å¤±è´¥
**ç—‡çŠ¶**: ä¾èµ–é¡¹ä¸‹è½½æˆ–æ„å»ºå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
1. âœ… æ£€æŸ¥ç½‘ç»œè¿æ¥
2. âœ… æ¸…ç†Conanç¼“å­˜: `conan remove "*" --confirm`
3. âœ… æ›´æ–°Conan: `pip install --upgrade conan`

#### âŒ å¿«é€Ÿæ„å»ºå¤±è´¥
**ç—‡çŠ¶**: ä½¿ç”¨ `--quick` é€‰é¡¹æ—¶æ„å»ºå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
1. âœ… é¦–æ¬¡æ„å»ºå¿…é¡»ä½¿ç”¨å®Œæ•´æ¨¡å¼ï¼ˆä¸å¸¦ `--quick`ï¼‰
2. âœ… ç¡®ä¿ä¾èµ–é¡¹å·²æ­£ç¡®å®‰è£…
3. âœ… æ£€æŸ¥ `build` ç›®å½•æ˜¯å¦å­˜åœ¨

## ğŸ“‹ ä¾èµ–é¡¹

ä»¥ä¸‹ä¾èµ–é¡¹ç”±Conanè‡ªåŠ¨ç®¡ç†ï¼š

### æ ¸å¿ƒåº“
- **Boost** (åŒ…å«ç¼–è¯‘åº“) - C++å®ç”¨å·¥å…·å’Œç®—æ³•
- **Protobuf & gRPC** - é€šä¿¡åè®®å’ŒRPCæ¡†æ¶
- **Arcus** - Ultimakerçš„Cura-CuraEngineé€šä¿¡åº“

### å‡ ä½•å’Œæ•°å­¦
- **Clipper** - å¤šè¾¹å½¢è£å‰ªå’Œåç§»
- **mapbox-geometry** - å‡ ä½•æ•°æ®ç»“æ„
- **mapbox-wagyu** - å¤šè¾¹å½¢æ“ä½œ

### å®ç”¨å·¥å…·
- **spdlog** - å¿«é€ŸC++æ—¥å¿—åº“
- **fmt** - å­—ç¬¦ä¸²æ ¼å¼åŒ–åº“
- **range-v3** - C++èŒƒå›´åº“
- **stb** - å•æ–‡ä»¶å…¬å…±åŸŸåº“

### ç³»ç»Ÿåº“
- **OpenSSL** - åŠ å¯†å’ŒSSL/TLS
- **ZLIB & BZip2** - å‹ç¼©åº“
- **c-ares** - å¼‚æ­¥DNSè§£æ

## ğŸ¯ å¼€å‘å·¥ä½œæµç¨‹

### ç®€å•å·¥ä½œæµç¨‹ï¼ˆæ¨èï¼‰
```cmd
# ä¿®æ”¹ä»£ç åï¼Œè¿è¡Œï¼š
build_curaengine.bat --quick
```

### å®Œæ•´å·¥ä½œæµç¨‹
```cmd
# é¦–æ¬¡è®¾ç½®æˆ–ä¾èµ–é¡¹å˜æ›´
build_curaengine.bat

# æ—¥å¸¸å¼€å‘ï¼ˆä»£ç ä¿®æ”¹ï¼‰
build_curaengine.bat --quick

# ä»…æµ‹è¯•æ„å»ºï¼ˆä¸éƒ¨ç½²ï¼‰
build_curaengine.bat --quick --no-deploy --no-git
```

### é«˜çº§å·¥ä½œæµç¨‹
1. **ä»£ç ä¿®æ”¹**: ç¼–è¾‘ `src/` ä¸­çš„æºæ–‡ä»¶
2. **æ„å»ºå’Œéƒ¨ç½²**: è¿è¡Œ `build_curaengine.bat --quick`
3. **åœ¨Curaä¸­æµ‹è¯•**: æ›´æ–°çš„CuraEngine.exeè‡ªåŠ¨éƒ¨ç½²
4. **ç‰ˆæœ¬æ§åˆ¶**: æ›´æ”¹è‡ªåŠ¨æäº¤å¹¶æ¨é€åˆ°GitHub

## âœ… æˆåŠŸæŒ‡ç¤ºå™¨

æ„å»ºæˆåŠŸæ—¶æ‚¨ä¼šçœ‹åˆ°ï¼š
- âœ… "æˆåŠŸ: CuraEngine.exeå·¥ä½œæ­£å¸¸" éªŒè¯æ¶ˆæ¯
- âœ… "æˆåŠŸ: CuraEngine.exeå·²å¤åˆ¶åˆ° Curaç›®å½•"
- âœ… "æˆåŠŸ: æ›´æ”¹å·²æ¨é€åˆ°GitHubä»“åº“"
- âœ… "æ‰€æœ‰æ“ä½œå·²æˆåŠŸå®Œæˆï¼"

## ğŸ“Š æ„å»ºäº§ç‰©

æˆåŠŸæ„å»ºåï¼Œæ‚¨å°†æ‹¥æœ‰ï¼š
- `build\Release\CuraEngine.exe` - ä¸»è¦å¯æ‰§è¡Œæ–‡ä»¶
- `build\Release\_CuraEngine.lib` - é™æ€åº“
- `build\Release\*.dll` - å¿…éœ€çš„è¿è¡Œæ—¶åº“
- `C:\Users\wsd07\vscode\Cura-Dev\Cura\CuraEngine.exe` - éƒ¨ç½²çš„å¯æ‰§è¡Œæ–‡ä»¶

## ğŸ”— é›†æˆç‚¹

### Curaé›†æˆ
- CuraEngine.exeè‡ªåŠ¨éƒ¨ç½²åˆ°Curaç›®å½•
- Curaå°†ä½¿ç”¨æ›´æ–°çš„å¼•æ“è¿›è¡Œåˆ‡ç‰‡æ“ä½œ
- æ— éœ€é¢å¤–é…ç½®

### GitHubé›†æˆ
- è‡ªåŠ¨æäº¤ï¼ˆåŒ…å«æ—¶é—´æˆ³ï¼‰
- æ¨é€åˆ° https://github.com/wsd07/Cura çš„ `main` åˆ†æ”¯
- æäº¤æ¶ˆæ¯åŒ…å«æ„å»ºæ—¥æœŸå’Œæ—¶é—´

## ğŸ“ æŠ€æœ¯è¯´æ˜

- **Boostä¿®å¤**: åŒ…å«è‡ªå®šä¹‰çš„ `boost_exception_fix.cpp` ä»¥å®ç°Windowså…¼å®¹æ€§
- **é™æ€é“¾æ¥**: å°½å¯èƒ½å‡å°‘å¤–éƒ¨ä¾èµ–
- **Releaseæ„å»º**: æ€§èƒ½ä¼˜åŒ– (-O2, NDEBUG)
- **MSVCå…¼å®¹æ€§**: ä½¿ç”¨Visual Studio 2022å·¥å…·é“¾æ„å»º
- **64ä½**: ç›®æ ‡x64æ¶æ„

## ğŸ¯ ä½¿ç”¨å»ºè®®

### æ—¥å¸¸å¼€å‘
- ä»£ç ä¿®æ”¹åä½¿ç”¨ï¼š`build_curaengine.bat --quick`
- ä¾èµ–é¡¹å˜æ›´åä½¿ç”¨ï¼š`build_curaengine.bat`
- æ¸…ç†æ„å»ºä½¿ç”¨ï¼š`build_curaengine.bat --clean`

### æ€§èƒ½ä¼˜åŒ–
- å¿«é€Ÿæ„å»ºæ¯”å®Œæ•´æ„å»ºå¿«5-8å€
- ä½¿ç”¨SSDå¯æ˜¾è‘—æå‡æ„å»ºé€Ÿåº¦
- å…³é—­æ€æ¯’è½¯ä»¶å®æ—¶æ‰«æå¯æå‡æ€§èƒ½

## ğŸ”— ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” |
|------|------|
| `build_curaengine.bat` | ä¸»è¦æ„å»ºå’Œéƒ¨ç½²è„šæœ¬ |
| `src/boost_exception_fix.cpp` | Windows Boostå…¼å®¹æ€§ä¿®å¤ |
| `CMakeLists.txt` | æ„å»ºé…ç½®ï¼ˆå·²ä¿®æ”¹ï¼‰ |
| `conanfile.py` | ä¾èµ–é¡¹è§„èŒƒ |
| `BUILD_INSTRUCTIONS.md` | æœ¬æ–‡æ¡£ |
| `QUICK_START.md` | å¿«é€Ÿå¼€å§‹æŒ‡å— |
